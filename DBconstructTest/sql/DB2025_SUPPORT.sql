CREATE DATABASE IF NOT EXISTS DB2025_7;
USE DB2025_7;
DROP TABLE IF EXISTS DB2025_SUPPORT;
CREATE TABLE DB2025_SUPPORT (
    SUPPORT_ID INT PRIMARY KEY,
    ID INT NOT NULL,
    USER_ID VARCHAR(20) NOT NULL,
    PHONE VARCHAR(20) NOT NULL,
    RATING FLOAT CHECK (지원자평점 BETWEEN 1.0 AND 5.0),
    RECRUITMENT_STATE ENUM('채택됨', '채택 안됨') DEFAULT '채택 안됨',
    SUPPORT_TEXT TEXT,
    SUPPORT_CREATED_AT DATETIME DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (ID) REFERENCES RECRUITMENT(ID) ON DELETE CASCADE,
    FOREIGN KEY (USER_ID) REFERENCES USERS(USER_ID) ON DELETE CASCADE,
    FOREIGN KEY (PHONE) REFERENCES USERS(PHONE) ON DELETE CASCADE,
    FOREIGN KEY (RATE) REFERENCES USERS(RATE) ON DELETE CASCADE
);

-- 3. 데이터 삽입
INSERT INTO DB2025_SUPPORT (
    ID, SUPPORT_ID, USER_ID, PHONE, RATING, RECRUITMENT_STATE, SUPPORT_TEXT, SUPPORT_CREATED_AT
) VALUES
(1, 2, '2276123', '010-1234-5678', 3.9, '채택됨', '바로 도와드릴 수 있어요!', '2025-05-10 08:13:00'),
(2, 3, '1955034', '010-3456-7890', 4.4, '채택 안됨', '오늘 오후에 가능해요!', '2025-05-11 18:13:00'),
(3, 2, '1955034', '010-3456-7890', 4.4, '채택 안됨', '제가 해본 적 있어요. 잘할 수 있습니다.', '2025-05-11 05:13:00'),
(4, 2, '2003076', '010-4567-8901', 4.1, '채택 안됨', '시간 맞춰 드릴 수 있어요!', '2025-05-11 00:13:00'),
(5, 5, '2276123', '010-1234-5678', 3.5, '채택됨', '경험 많아요. 믿고 맡겨주세요!', '2025-05-11 03:13:00');
SELECT * FROM DB2025_SUPPORT;
